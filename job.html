<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wire and Gate System</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #f0f0f0;
      height: 100vh;
    }
    canvas {
      background-color: #ffffff;
      border: 1px solid #000000;
    }
    .toolbar {
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background: #ffffff;
      padding: 10px 20px;
      border: 1px solid #000000;
      border-radius: 5px;
      display: flex;
      gap: 10px;
    }
    .toolbar button {
      padding: 10px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .toolbar button.active {
      background-color: #007bff;
      color: white;
    }
    .toolbar button:not(.active) {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <button id="gateButton" class="active">Gate</button>
    <button id="wireButton">Wire</button>
  </div>
  <canvas id="canvas"></canvas>
  
  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const cellSize = 40;
    const rows = 15;
    const cols = 20;

    canvas.width = cols * cellSize;
    canvas.height = rows * cellSize;

    const grid = Array.from({ length: rows }, () =>
      Array.from({ length: cols }, () => ({ gate: false, wire: false }))
    );

    let currentTool = 'gate'; // Default tool

    // Tool buttons
    const gateButton = document.getElementById('gateButton');
    const wireButton = document.getElementById('wireButton');

    gateButton.addEventListener('click', () => {
      currentTool = 'gate';
      gateButton.classList.add('active');
      wireButton.classList.remove('active');
    });

    wireButton.addEventListener('click', () => {
      currentTool = 'wire';
      wireButton.classList.add('active');
      gateButton.classList.remove('active');
    });

    canvas.addEventListener('click', (e) => {
      const rect = canvas.getBoundingClientRect();
      const x = Math.floor((e.clientX - rect.left) / cellSize);
      const y = Math.floor((e.clientY - rect.top) / cellSize);

      if (currentTool === 'gate') {
        grid[y][x].gate = true;
        grid[y][x].wire = false; // Prioritize gate if overlapping
      } else if (currentTool === 'wire') {
        grid[y][x].wire = true;
        // Wires and gates can coexist
      }
      drawGrid();
    });

    function drawGrid() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          const cell = grid[y][x];

          // Draw wires (thin gray lines)
          if (cell.wire) {
            ctx.strokeStyle = '#A9A9A9'; // Gray color
            ctx.lineWidth = 2;

            // Vertical wire
            ctx.beginPath();
            ctx.moveTo(x * cellSize + cellSize / 2, y * cellSize);
            ctx.lineTo(x * cellSize + cellSize / 2, (y + 1) * cellSize);
            ctx.stroke();

            // Horizontal wire
            ctx.beginPath();
            ctx.moveTo(x * cellSize, y * cellSize + cellSize / 2);
            ctx.lineTo((x + 1) * cellSize, y * cellSize + cellSize / 2);
            ctx.stroke();
          }

          // Draw gates (blue squares)
          if (cell.gate) {
            ctx.fillStyle = '#007bff'; // Blue color
            ctx.fillRect(
              x * cellSize + 5,
              y * cellSize + 5,
              cellSize - 10,
              cellSize - 10
            );
          }

          // Draw grid lines
          ctx.strokeStyle = '#000000'; // Black
          ctx.lineWidth = 1;
          ctx.strokeRect(x * cellSize, y * cellSize, cellSize, cellSize);
        }
      }
    }

    drawGrid();
  </script>
</body>
</html>
